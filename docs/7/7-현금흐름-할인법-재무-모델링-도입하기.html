
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>현금흐름 할인법 재무 모델링 도입하기</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">현금흐름 할인법 재무 모델링 도입하기</h2>
                                <div class="box-info">
                                    <p class="category">탐구 생활/개발 탐구</p>
                                    <p class="date">2024-04-02 00:15:57</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p data-ke-size="size16">이번에 현금흐름 할인법을 통한 재무 모델링 기능을 도입하였다. 이 기능을 도입하면서 고민했던 부분들을 적는다.</p>
<h3 data-ke-size="size23">요구사항 분석</h3>
<h4 data-ke-size="size20">요구사항</h4>
<p data-ke-size="size16"><b>목표로 하는 할인율 (IRR) 수준</b>에서 <b>현금흐름 할인법을 통해 계산된 현재가치가 0</b>이 되도록 만드는 <b>자산 매입 가격</b>을 결정하는 모델을 만들어야한다. 다만 이때 <b>미래 현금흐름은 자산 매입가격 등 여러 변수(이자율, 수수료 등)에 영향</b>을 받는다.</p>
<h4 data-ke-size="size20">분석</h4>
<p data-ke-size="size16">(1) 요구사항에 명시적으로 드러나지 않았지만 미래 현금흐름을 만들기 위해서는 여러 계정(<span style="background-color: #ffffff; color: #1f1f1f; text-align: left;">計定,<span>&nbsp;</span></span>account) 을 순차적으로 계산하여 도출해야 한다.&nbsp; n 개의 재무모델을 만들기 때문에 여러 계정간의 순차적인 계산이 확장성있으면서 견고하게 유지될 수 있도록 구조가 설계되어야 한다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">(2) 자산 매입 가격 결정 알고리즘을 조금 까다롭게 만드는 부분은 미래 현금흐름을 통해 자산 매입 가격을 결정해야 하는데, 그 미래 현금흐름이 자산 매입 가격에 영향을 받는 구조라는 것이다. 따라서 수학적인 수식을 구현하는 것 뿐만 아니라 탐색 알고리즘이 사용되어야 할것으로 파악했다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">(1) + (2) 여러 계정을 순차적으로 계산하여 도출된 현금흐름은 결국 자산 매입가격을 인자로 주입받게된다. 이때 자산 매입 가격이 탐색 알고리즘의 대상이 되므로 현금흐름을 도출하는 과정에서 여러 계정 객체를 생성하는 비용이 발생하지 않도록 객체, 메서드 디자인에 고려되어야 한다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">(3) 추가적인 리서치와 담당자 인터뷰를 통해 재무모델은 일, 월, 연 단위에서 모두 동작해야함을 파악했다. 따라서 재무 모델 알고리즘을 만들때 이러한 사항이 고려 되어야 한다.</p>
<h3 data-ke-size="size23">구현을 위한 학습</h3>
<h4 data-ke-size="size20">&nbsp;</h4>
<h4 data-ke-size="size20">계정(<span style="background-color: #ffffff; color: #1f1f1f; text-align: left;">計定,<span>&nbsp;</span></span>account)&nbsp;구조 설계</h4>
<p data-ke-size="size16">나중에 이 코드를 다시 볼 나를 위해서 혹은 다른 동료 개발자를 위해서 일관성있는 구조를 잡는것은 중요하다. 계정들은 순서가 명확하다. 그리고&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<h4 data-ke-size="size20">현금흐름 할인법(DCF)</h4>
<p data-ke-size="size16">일반적인 현금흐름 할인법은 여러 가설을 통해 예측 가능한 현금 흐름이 발생하고, 그 현금 흐름을 정해진 할인률에 따라 할인하여 현재 가치를 계산하는 것이다. (<a href="https://www.investopedia.com/terms/d/dcf.asp" target="_blank" rel="noopener">investopia</a>)</p>
<p><figure class="imageblock alignCenter" width="400" height="312" >
    <span data-lightbox="lightbox">
        <img src="./img/스크린샷 2024-03-25 오후 10.08.06.png" width="400" height="312"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">간단한 계산식이기 때문에 누구든지 금방 배워서 사용할 수 있으면서, 미래에 발생할 가치를 현재에 가져와서 평가하는데 설득력이 있다.</p>
<p data-ke-size="size16">&nbsp;</p>
<h4 data-ke-size="size20">목표수익률(IRR)</h4>
<p data-ke-size="size16">IRR 이란 현재가치를 0으로 만드는 할인률을 의미한다. (<a style="color: #0070d1; text-align: start;" href="https://www.investopedia.com/terms/i/irr.asp">investopia</a>)</p>
<p data-ke-size="size16">이 기능에서 목표 수익률을 IRR 이라고 표현했다. 목표 수익률이라는 용어가 모든 상황에서 IRR 로 통용되는것은 아닐것이다. 오히려 IRR 은 투자의 기회비용으로 볼 수 있다.&nbsp;</p>
<p><figure class="imageblock alignCenter" width="400" height="323" >
    <span data-lightbox="lightbox">
        <img src="./img/스크린샷 2024-03-25 오후 10.27.52.png" width="400" height="323"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">따라서 특정 가정하에 목표 수익률(IRR) 을 얻기 위해서는 현재 해당 자산을 NPV 가격으로 매입해도 괜찮다는 의사결정을 내릴 수 있게 도움을 준다. 이 IRR은 오로지 주어진 가정이 잘 지켜진다는 가정하에서 성립하기 때문에 IRR 이 맞다고해서 무조건 투자하는 것은 아니다.</p>
<p data-ke-size="size16">&nbsp;</p>
<h4 data-ke-size="size20">뉴턴-랩슨 방법 (Newton-Raphson Method)</h4>
<p data-ke-size="size16">뉴턴 랩슨 방법은 미분 가능한 n 차 함수의 값이 0에 근사하게 맏드는 파라미터의 근사치를 구할때 사용되는 방법이다. 즉 , 미분 가능한 n차 방정식의 해의 근사치를 구할 수 있는 방법이다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">n 차 방정식의 해를 구하는 방법이라는 말을 보자 나는 단번에 IRR 을 구할때 사용하면 되겠다는 생각을 했다. 그리고 다행스럽게도 현재 우리회사에서 사용하는 모델은 현금 흐름이 다이나믹하게 변경되는 모델이 아니므로 현재가치로 할인하는 함수는 미분가능하다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">그 원리는 간단하다.&nbsp;</p>
<p><figure class="imageblock alignCenter" width="500" height="357" >
    <span data-lightbox="lightbox">
        <img src="./img/NewtonIteration_Ani.gif" width="500" height="357"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">(1) f(x) 에 대해 특정 파라미터 값 x 에서 f(x) 와 접하는 직선을 만들고, 그 직선과 x 의 교점을 찾는다.</p>
<p data-ke-size="size16">(2) 해당 교점에서 다시 f(x) 와 접하는 직선을 만들고, 그 직선과 x 의 교점을 찾는다.</p>
<p data-ke-size="size16">(3) 이러한 과정을 계속 반복하다보면 f(x) = 0 이 되는 특정한 x 값에 근사하게 된다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">이를 수학적으로 표시하면, 다음과 같다.</p>
<p><figure class="imageblock alignCenter" width="300" height="97" >
    <span data-lightbox="lightbox">
        <img src="./img/스크린샷 2024-04-01 오후 10.54.33.png" width="300" height="97"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">IRR 을 어떻게 구할지 고민하다가 찾은 방법이다. 처음에 주어진 자산 매입 가격이 일정 범위 안에서 목표 IRR 을 충족하는지 검사하기 위해 구현에 공을 들인 알고리즘이지만, 결국에는 목표 IRR 로 현금흐름을 할인한 현재가치 (NPV) 가 일정한 범위 안에서 0을 충족하는지 찾는게 더 속도가 빠르고 직관적이어서 마지막에 검사용 IRR 을 산출하는데만 이용되는 알고리즘이 되었다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
                        </div>
                        <br/>
                        <div class="tags">
                            #IRR #java #현금 흐름 할인법 #뉴턴-랩슨 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
